import Dialog from"./dialog.js";import Localstorage from"./localStorage.js";const localStorage=new Localstorage;export default class Todo{constructor(){this.enterButton=document.querySelector("#inputArea button"),this.input=document.querySelector("#inputArea input"),this.ul=document.querySelector("ul#toDoList"),localStorage.items.length>0&&this.loadJSON(),this.enterButton.addEventListener("click",t=>this.addListItem(t)),this.input.addEventListener("keypress",t=>this.addListItem(t))}addListItem(t){this.input.value.length>0&&("Enter"===t.key||void 0===t.key)&&this.createListItem()}createListItem(){const t=document.createElement("li");t.innerHTML=this.input.value+' <i class="far fa-trash-alt"></i>',this.ul.appendChild(t),this.input.value="",t.addEventListener("click",t=>this.crossOut(t)),t.querySelector("i").addEventListener("click",t=>this.deleteListItem(t)),localStorage.updateItems(this.ul)}crossOut(t){t.currentTarget.classList.toggle("done"),localStorage.updateItems(this.ul)}async deleteListItem(t){t.stopPropagation();const e=t.currentTarget.parentNode,i=new Dialog({questionText:"<h2>Are you rizzle bizzle for shizzle?</h2>",trueButtonText:"Yay",falseButtonText:"Nay"});await i.confirm()&&(e.remove(),localStorage.updateItems(this.ul))}loadJSON(){let t="";localStorage.items.forEach(e=>{t+=e}),this.ul.innerHTML=t,this.ul.querySelectorAll("li").forEach(t=>{t.addEventListener("click",t=>this.crossOut(t)),t.querySelector("i").addEventListener("click",t=>this.deleteListItem(t))})}}